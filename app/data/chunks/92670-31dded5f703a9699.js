(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92670,33026,65744,21770,19349],{95482:function(e,t,o){"use strict";o.d(t,{o:function(){return j},z:function(){return H}});var n=o(26042),l=o(69396),a=o(85893),i=o(23114),s=o(51769),d=o(11163),r=o(67294),c=o(38790),u=o.n(c),f=o(53365),w=o.n(f),h=o(1622),_=o(64732),g=o(83636),v=o(20948),m=o(73198),x=o(49906),b=o(17747),p=o(78764),C=o(29154),N=o(79149),B=o(73041),k=o(278),y=o(20061),I=o(90634),Z=o(66438),T=o(45822),S=o(29596),M=o(27503);const j=(0,r.memo)((e=>{let{channelId:t,setFollowerCount:o,isNoti:c=!1,btnClass:f,textClass:x,followedClass:j,isFollowed:V,content:P,activeStyles:O,channel:E}=e;var F;const{t:R}=(0,s.$G)(),{locale:A}=(0,k.Z)(),G=(0,d.useRouter)(),L=(0,Z.xJ)(),U=(0,Z.jY)(),{isChannelManager:W,isChannelSeniorManager:z}=(0,N.H)(),K=(0,S.E)(t,{defaultData:E,refetch:!1}),Y=(0,S.f)(t),q=(0,y.s)((e=>e.account.notifications||C.kT)),Q=(0,r.useRef)(null),J=(0,r.useRef)(null),$=V||K.is_follow||Y.is_follow;var X;const ee=null!==(X=K.notification)&&void 0!==X?X:Y.notification,{0:te,1:oe}=(0,r.useState)(!1),{0:ne,1:le}=(0,r.useState)("up"),{0:ae,1:ie}=(0,r.useState)("left"),{0:se,1:de}=(0,r.useState)(Boolean($)),re=!(null===(F=q.followedChannel)||void 0===F?void 0:F.enablePush),ce=(0,y.s)((e=>e.system.browserWidth<=C.h1)),ue=(0,y.s)((e=>!e.system.isMobileLandscape&&ce)),fe=async e=>{oe(!1),(0,b.SQ)()||(re?D(K,K,G):e!==ee&&((0,h.sO)((0,l.Z)((0,n.Z)({},K),{is_follow:!0,notification:e})),await H(t,e,R)))},we=(0,r.useCallback)((()=>oe(!1)),[]);(0,B.Z)(Q,we,te);const he=()=>{if(ce&&c){oe(!0);const e=g.dialogHandler.showDrawer({showCloseBtn:!0,headerEl:(0,a.jsx)("div",{children:R("notif.sidebar.headerTitle")}),bodyClass:"!p-0",bodyEl:(0,a.jsx)("div",{className:"pb-2 max-h-[25vh] h-full",children:_e.map(((t,o)=>(0,a.jsx)(m.Z,{text:t.text,onClick:()=>{g.dialogHandler.closeDialog(e),oe(!1),t.clickHandler()},btnClass:(0,i.Z)("w-full",t.btnClass&&" rounded-none bg-[#ededed] dark:bg-[#01488666]"),textClass:(0,i.Z)("flex pl-3 py-1 text-[#001426] dark:text-white text-sm"),startIcon:t.startIcon},"remaining-action-".concat(o))))})})}oe(!te),(()=>{if(J&&J.current){const{top:e,height:t,left:o}=J.current.getBoundingClientRect(),n=e+t>window.innerHeight/1.35,l=o>window.innerWidth/1.35;le(n?"up":"down"),ie(l?"right":"left")}})()};(0,r.useEffect)((()=>{de(Boolean($))}),[U,t,$]);const _e=(0,r.useMemo)((()=>[{settingId:C.P8.All,text:R("channel.text.all"),startIcon:(0,T.un)(C.P8.All),btnClass:ee===C.P8.All,clickHandler:async()=>await fe(C.P8.All)},{settingId:C.P8.Moderate,text:R("channel.text.moderate"),btnClass:ee===C.P8.Moderate,startIcon:(0,T.un)(C.P8.Moderate),clickHandler:async()=>await fe(C.P8.Moderate)},{settingId:C.P8.None,text:R("channel.text.none"),btnClass:ee===C.P8.None,startIcon:(0,T.un)(C.P8.None),clickHandler:async()=>await fe(C.P8.None)},{settingId:C.P8.Unfollow,text:R("popupModal.unfollowButton"),btnClass:ee===C.P8.Unfollow,startIcon:(0,T.un)(C.P8.Unfollow),clickHandler:()=>{(e=>{if(oe(!1),(0,b.SQ)())return;if(!(null===e||void 0===e?void 0:e.id))return;const l=g.dialogHandler.showCustomDialog({Component:v.B$,props:{channelName:e.name||e.title,unfollow:!0,onCancel:()=>g.dialogHandler.closeDialog(l),onOK:async()=>{de(!1),await H(t,C.P8.Moderate,R,!1);const{isSuccess:a,errorMsg:i,follower_count:s}=await(0,I.lc)(e);a?(y.s.setState((e=>(e.account.continueFollowChannel=void 0,(0,n.Z)({},e)))),o&&o(!1,s),(0,T.K_)({code:C.P8.Unfollow,t:R,val0:e.name})):g.dialogHandler.showToast({text:null===i||void 0===i?void 0:i.toString(),type:"NT_ERROR"}),g.dialogHandler.closeDialog(l)}}})})(K)}}]),[R,ee,t,se,K]),ge={textColor:se?"text-[#001D38]":"text-white",btnColor:se?"bg-[#EDEDED] border-[#EDEDED] px-3":"bg-black border-[#001D38] dark:bg-[#005BAF] dark:border-[#005BAF]",hoverColor:se?"hover:bg-[#DCDCDC] hover:border-[#DCDCDC]":"hover:bg-[#fea42e] hover:border-[#fea42e] dark:hover:bg-[#fea42e] dark:hover:border-[#E57F38]"};return W||z||U.id===K.id?null:(0,a.jsxs)("div",{className:"flex-none relative",ref:Q,children:[(0,a.jsx)("div",{className:(0,i.Z)(w().followBtn,ue&&w().float),children:(0,a.jsx)(m.Z,{ref:J,text:se?ue?void 0:R("channel.text.following"):R("channel.text.follow1"),startIcon:se&&(0,T.un)(ee,ge.textColor),endIcon:se&&(0,T.un)(4,ge.textColor),dataTestid:"channel-follow-btn",onClick:async()=>{(0,b.SQ)()||(se?he():await(async e=>{if(!(null===e||void 0===e?void 0:e.id))return;if(!L.user_id){const e="/channel/[...ids]"==G.pathname,t=(0,p.createSignOnContext)({content:P,context:e?p.SIGN_ON_CONTEXT.FollowOnChannel:void 0});return void(0,M.jm)({signonContext:t})}const{isSuccess:t,errorMsg:n,follower_count:l}=await(0,I.jY)(e);de(!0),t?((0,T.K_)({code:C.P8.Followed,t:R,val0:null===e||void 0===e?void 0:e.name}),o&&o(!0,l),await H(null===e||void 0===e?void 0:e.id,C.P8.Moderate,R,!1)):g.dialogHandler.showToast({text:null===n||void 0===n?void 0:n.toString(),type:"NT_ERROR"}),re&&D(e,e,G)})(K))},btnClass:(0,i.Z)("followBtn flex rounded-full items-center border",f,ge.hoverColor,ge.btnColor,se&&(0,i.Z)("followed",j)),textClass:(0,i.Z)("flex-initial line-clamp-1",(0,_.u)(A),x,ge.textColor)})}),!ce&&(0,a.jsx)("div",{className:(0,i.Z)(u().notiButtons,"min-w-max dark:bg-[#001426]",!te&&"invisible","up"===ne&&u().activeUp,"right"===ae&&"right-0",O),children:te&&_e.map(((e,t)=>(0,a.jsx)(m.Z,{text:e.text,onClick:e.clickHandler,btnClass:(0,i.Z)(e.btnClass&&"bg-[#ededed] dark:bg-[#01488666]","hover:bg-[#ededed] dark:hover:bg-[#01488666]"),textClass:"flex flex-1 pl-3 text-[#001426] dark:text-white text-sm",startIcon:e.startIcon},"remaining-action-".concat(t))))})]})}));j.displayName="FollowChannelSettings";const H=async function(e,t,o){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{errorMsg:l,data:a}=await(0,x.hK)({channels:{[e]:t}});n&&(Boolean(!l&&a)?(0,T.K_)({code:t,t:o}):g.dialogHandler.showToast({text:null===l||void 0===l?void 0:l.toString(),type:"NT_ERROR"}))},D=(e,t,o)=>{g.dialogHandler.showCustomDialog({Component:v.SL,props:{channelName:(null===e||void 0===e?void 0:e.name)||(null===t||void 0===t?void 0:t.name),onOK:()=>{o.push("/me/notifications")}}})}},45822:function(e,t,o){"use strict";o.d(t,{K_:function(){return v},Wt:function(){return x},su:function(){return b},un:function(){return m},wr:function(){return _}});var n=o(26042),l=o(85893),a=o(23114),i=o(83636),s=o(22604),d=o(33026),r=o(65744),c=o(21770),u=o(19349),f=o(29154),w=o(11163),h=o.n(w);const _=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{0:e("followTopic.topicNoneToast"),1:e("followTopic.topicModerateToast"),2:e("channel.text.allToast"),3:e("channel.text.unfollowed",{val0:t}),4:e("channel.text.followed",{val0:t})}},g={0:c.default,1:r.default,2:d.default,3:u.default,4:s.default},v=e=>{let{code:t,t:o,type:n="NT_INFO",val0:l=""}=e;const a=_(o,l)[t];i.dialogHandler.showToast({text:a,type:n,gotItText:" ",displayTime:5e3})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text-[#001D38] dark:text-white";const o=g[e];return o?(0,l.jsx)(o,{className:(0,a.Z)("w-4 h-4",t)}):null},x=e=>{let{code:t,t:o,type:n="NT_INFO",val0:l=""}=e;const a=_(o,l)[t],s=window.innerWidth<=f.h1?"!bottom-[7rem]":"";i.dialogHandler.showToast({text:a,type:n,topClassName:s,displayTime:5e3})},b=e=>{let{code:t,t:o,val0:l="",gotItText:a=" ",gotItLink:s}=e;const d=o("like"===t?"channel.text.followed":"channel.text.unfollowed",{val0:l}),r=window.innerWidth<=f.f6?"!bottom-[8rem]":"";i.dialogHandler.showToast((0,n.Z)({text:d,type:"NT_INFO",topClassName:r,displayTime:1e4,gotItText:a},s&&{clickToastAction:()=>h().push(s)}))}},64732:function(e,t,o){"use strict";o.d(t,{u:function(){return N}});var n=o(26042),l=o(69396),a=o(85893),i=o(23114),s=o(51769),d=o(11163),r=o(67294),c=o(95482),u=o(1622),f=o(83636),w=o(20948),h=o(44321),_=o(17747),g=o(78764),v=o(29154),m=o(79149),x=o(20061),b=o(90634),p=o(55695),C=o(27503);const N=e=>{switch(e){case"zh-CN":case"zh-TW":return"text-s13 b588:text-s14";case"ru-RU":return"text-[9.5px] b588:text-s10";default:return"text-s16"}},B=e=>{const{content:t,channel:o,parentChannel:r,loading:N,size:B="medium",disabled:k,setFollowerCount:y,startIcon:I,updateFollowerCount:Z,followTxt:T,followingTxt:S,disableHover:M,className:j}=e,H=(0,p.xJ)(),D=(0,x.s)((e=>e.system.isCSR)),V=(0,p.jY)(),P=(0,d.useRouter)(),{t:O}=(0,s.$G)(),E=(0,x.s)((e=>e.following.followedChannels[(null===o||void 0===o?void 0:o.id)||""])),{isChannelManager:F,isChannelSeniorManager:R}=(0,m.H)(),A=F||R,G=!(!r||V.id!==r.id);return!D||A||V.id===(null===o||void 0===o?void 0:o.id)?null:(0,a.jsx)(h.Z,(0,l.Z)((0,n.Z)({},e),{variant:E?"primary":"secondary",size:B,className:(0,i.Z)(j,"whitespace-nowrap"),theme:"orange",shape:"rounded",isLoading:N,disabled:k,disableHover:M,onClick:E?e=>{if(e.preventDefault(),e.stopPropagation(),!(null===o||void 0===o?void 0:o.id))return;if((0,_.SQ)())return;const t=f.dialogHandler.showCustomDialog({Component:w.B$,props:{channelName:o.name||o.title,unfollow:!0,onCancel:()=>f.dialogHandler.closeDialog(t),onOK:async()=>{f.dialogHandler.closeDialog(t),(0,b.lc)(o),null===y||void 0===y||y(!1);let e=Number(o.follower||o.follower_count||0);if(e=e>=0?e-1:0,null===Z||void 0===Z||Z(e),G&&r){const e=r.following_count||0;r.following_count=e>=0?e-1:0,(0,u.sO)(r)}f.dialogHandler.showToast({text:O("channel.text.unfollowed",{val0:o.name}),type:"NT_INFO"})}}})}:e=>{if(e.preventDefault(),e.stopPropagation(),!(null===o||void 0===o?void 0:o.id))return;if(!H.user_id){const e="/channel/[...ids]"==P.pathname,o=(0,g.createSignOnContext)({content:t,context:e?g.SIGN_ON_CONTEXT.FollowOnChannel:void 0});return void(0,C.jm)({signonContext:o})}if((0,_.SQ)())return;(0,b.jY)(o,t).then((async e=>{let{isSuccess:t}=e;t&&await(0,c.z)(o.id,v.P8.Moderate,O,!1)})),null===y||void 0===y||y(!0);const n=Number(o.follower||o.follower_count||0);if(null===Z||void 0===Z||Z(n),G&&(null===r||void 0===r?void 0:r.id)){const e=r.following_count||0;r.following_count=e+1,(0,u.sO)(r)}f.dialogHandler.showToast({text:O("channel.text.followed",{val0:null===o||void 0===o?void 0:o.name}).toString(),type:"NT_INFO"})},text:E?S||O("social.followed"):T||O("social.follow"),startIcon:I}))};t.Z=(0,r.memo)(B)},44321:function(e,t,o){"use strict";var n=o(26042),l=o(69396),a=o(85893),i=o(23114),s=o(71176),d=o(67294),r=o(18643),c=o(6679),u=o.n(c);const f=(0,d.forwardRef)(((e,t)=>{let{id:o,dataTestid:d,text:c,hasGradient:f,startIcon:w,startIconClass:h,endIcon:_,endIconClass:g,disabled:v,isLoading:m,className:x,tooltip:b,title:p,tooltipDisabled:C,theme:N="black",variant:B="primary",shape:k="rect",display:y="text",size:I,type:Z,onClick:T,onMouseEnter:S,onMouseLeave:M,children:j,disableHover:H}=e;const D=(0,a.jsxs)("button",{id:o,"data-testid":d,ref:t,className:(0,i.Z)("gjw-button",u().gjwButton,u()[I||""],"text"!==k&&u()[B],u()[k],u()[N],f&&u().gradient,H&&"hover-disable",x),disabled:v||m,type:"dropdown"!==Z?Z:"button",title:p,onClick:T,onMouseEnter:S,onMouseLeave:M,children:[(0,a.jsx)(s.Z,{loading:!!m,color:"#0074e8",size:"small"===I?3.5:"large"===I?5:4.5}),w&&(0,a.jsx)("span",{className:(0,i.Z)(u().icon,h),children:w}),j||"icon"!==y&&(0,a.jsx)("span",{className:"text",children:c}),_&&(0,a.jsx)("span",{className:(0,i.Z)(u().icon,g),children:_})]});return(null===b||void 0===b?void 0:b.content)?(0,a.jsx)(r.Z,(0,l.Z)((0,n.Z)({},b),{disabled:C||b.disabled,children:D})):D}));f.displayName="ButtonV2",t.Z=f},33026:function(e,t,o){"use strict";o.r(t);var n=o(85893),l=o(67294),a=o(23114),i=o(5152);const s=o.n(i)()((()=>o.e(77997).then(o.bind(o,77997)).then((e=>e.default))),{loadableGenerated:{webpack:()=>[77997]}}),d=e=>{let{className:t}=e;return(0,n.jsx)(s,{className:(0,a.Z)("svgIcon",t)})};t.default=(0,l.memo)(d)},65744:function(e,t,o){"use strict";o.r(t);var n=o(85893),l=o(67294),a=o(23114),i=o(5152);const s=o.n(i)()((()=>o.e(57839).then(o.bind(o,57839)).then((e=>e.default))),{loadableGenerated:{webpack:()=>[57839]}}),d=e=>{let{className:t}=e;return(0,n.jsx)(s,{className:(0,a.Z)("svgIcon",t)})};t.default=(0,l.memo)(d)},21770:function(e,t,o){"use strict";o.r(t);var n=o(85893),l=o(67294),a=o(23114),i=o(5152);const s=o.n(i)()((()=>o.e(56967).then(o.bind(o,56967)).then((e=>e.default))),{loadableGenerated:{webpack:()=>[56967]}}),d=e=>{let{className:t}=e;return(0,n.jsx)(s,{className:(0,a.Z)("svgIcon",t)})};t.default=(0,l.memo)(d)},19349:function(e,t,o){"use strict";o.r(t);var n=o(85893),l=o(67294),a=o(23114),i=o(5152);const s=o.n(i)()((()=>o.e(62029).then(o.bind(o,62029)).then((e=>e.default))),{loadableGenerated:{webpack:()=>[62029]}}),d=e=>{let{className:t}=e;return(0,n.jsx)(s,{className:(0,a.Z)("svgIcon",t)})};t.default=(0,l.memo)(d)},90634:function(e,t,o){"use strict";o.d(t,{jY:function(){return u},lc:function(){return f}});var n=o(26042),l=o(69396),a=o(20061),i=o(57583),s=o(98940),d=o(29154),r=o(78764);const c=e=>{const t=a.s.getState().following;e(t),a.s.setState({following:t})},u=async(e,t)=>{const{isSuccess:o,errorMsg:a}=await(0,i.IG)(e.id,null===t||void 0===t?void 0:t.id);let u=e.follower_count||0;return o&&(c((t=>{t.followedChannels=(0,n.Z)({[e.id]:e},t.followedChannels)})),s.j.setState((t=>{var o;return(null===(o=t.data[e.id])||void 0===o?void 0:o.id)?(u=t.data[e.id].follower_count||0,u++,t.data[e.id]=(0,l.Z)((0,n.Z)({},t.data[e.id]),{follower_count:u,is_follow:!0,notification:d.P8.Moderate}),(0,n.Z)({},t)):t})),(0,r.sendTrackingFollowChannel)({eventName:"follow_channel",data:{channel_id:e.id}})),{isSuccess:o,errorMsg:a,follower_count:u}},f=async e=>{const{isSuccess:t,errorMsg:o}=await(0,i.YE)(e.id);let a=e.follower_count||0;return t&&(c((t=>{delete t.followedChannels[e.id],t.followedChannels=(0,n.Z)({},t.followedChannels)})),s.j.setState((t=>{var o;return(null===(o=t.data[e.id])||void 0===o?void 0:o.id)?(a=t.data[e.id].follower_count||0,a>0&&a--,t.data[e.id]=(0,l.Z)((0,n.Z)({},t.data[e.id]),{follower_count:a,is_follow:!1,notification:d.P8.Unfollow}),(0,n.Z)({},t)):t})),(0,r.sendTrackingFollowChannel)({eventName:"unfollow_channel",data:{channel_id:e.id}})),{isSuccess:t,errorMsg:o,follower_count:a}}},53365:function(e){e.exports={followBtn:"FollowChannelSettings_followBtn__flGbo",float:"FollowChannelSettings_float__t81eL"}},6679:function(e){e.exports={gjwButton:"ButtonV2_gjwButton__VFb5k",black:"ButtonV2_black__HU1zG",secondary:"ButtonV2_secondary__HlAT3",text:"ButtonV2_text__BaLmO",blue:"ButtonV2_blue__xLG0W",orange:"ButtonV2_orange__gabjb",gradient:"ButtonV2_gradient__sI8Db",gold:"ButtonV2_gold__Icdyw",red:"ButtonV2_red__68Sk3",primary:"ButtonV2_primary__82DN7",square:"ButtonV2_square__n5HCa",icon:"ButtonV2_icon__AovMe",rounded:"ButtonV2_rounded__0_qeQ",circle:"ButtonV2_circle__Hr_E7",medium:"ButtonV2_medium__mWAK8",large:"ButtonV2_large__Y_DuO",disabled:"ButtonV2_disabled__odecJ"}},38790:function(e){e.exports={collapsibleButtons:"VideoButtonsMenu_collapsibleButtons__zpUem",menuItems:"VideoButtonsMenu_menuItems__w4Uu_",fullWidth:"VideoButtonsMenu_fullWidth__jvS3J",vLikeAct:"VideoButtonsMenu_vLikeAct__8AU5A",moreItems:"VideoButtonsMenu_moreItems__oBWqk",active:"VideoButtonsMenu_active__EqCPg",notiButtons:"VideoButtonsMenu_notiButtons__mGoki",side:"VideoButtonsMenu_side__Dqfc1"}}}]);